<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Login - Admin</title>
  <style>body{font-family:sans-serif;padding:20px} .card{max-width:420px;margin:40px auto;padding:20px;border-radius:8px;background:#fff;box-shadow:0 2px 6px rgba(0,0,0,.08)}label{display:block;margin:10px 0 6px}input{width:100%;padding:10px;border:1px solid #ddd;border-radius:6px}button{margin-top:16px;padding:10px 14px;border:0;background:#3b82f6;color:#fff;border-radius:6px;cursor:pointer}</style>
</head>
<body>
  <div class="card">
    <h2>Entrar (Master)</h2>
    <p>Use seu email e senha mestre (MASTER_EMAIL / MASTER_PASSWORD).</p>
    <label for="email">Email</label>
    <input id="email" value="jhonatan@example.com" />
    <label for="password">Senha</label>
    <input id="password" type="password" value="jhonatan" />
    <button id="login">Entrar</button>
    <div id="msg" style="margin-top:12px;color:#c00"></div>
  </div>
  <script>
    const loginBtn = document.getElementById('login');
    const msg = document.getElementById('msg');
    loginBtn.addEventListener('click', async () => {
      msg.textContent = '';
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      try {
        const res = await fetch((location.origin.includes('3001') ? (process.env?.BACKEND_URL || 'http://localhost:3000') : 'http://localhost:3000') + '/auth/login', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ email, password }),
        });
        const data = await res.json();
        if (!res.ok) throw new Error(data.error || data.message || 'Erro');
        localStorage.setItem('token', data.token);
        location.href = '/dashboard';
      } catch (err) {
        msg.textContent = err.message;
      }
    });
  </script>
</body>
</html>
